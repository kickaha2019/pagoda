<%= erb :header, :locals => {:page => 'scan_record'} %>

<%
  @rec = $database.get( 'scan', :id, id)[0]
%>

  <table class="scan_record list">
    <tr><th>Site</th><td><%= @rec[:site] %></td></tr>
    <tr><th>Type</th><td><%= @rec[:type] %></td></tr>
    <tr><th>Name</th><td><%= "<a href=\"#{@rec[:url]}\">#{@rec[:name]}<a/>" %></td></tr>
    <tr><th>Label</th><td><%= @rec[:label] %></td></tr>
    <tr><th>Status</th><td><%= scan_status(@rec) %></td></tr>
    <%=
      html = []
      if $debug
        html << "<tr><th>Reduced name</th><td>#{$names.reduce( @rec[:name])}</td></tr>"
        html << '<tr><th>Bound</th><td>'
        if (@rec[:bind].size > 0) && ((id = @rec[:bind][0][:id]) >= 0)
          html << game_link( id)
        end
        html << '</td></tr><tr><th>Matches</th><td>'
        html << $names.matches( $names.reduce( @rec[:name])).collect do |mid|
          game_link( mid)
        end.join( '</td></tr><tr><th></th><td>')
        html << '</td></tr>'
      end
      html.join( "\n")
    %>
  </table>

</body>
</html>